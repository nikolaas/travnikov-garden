# Сайт ботанического сада имени П.И. Травникова

## Установка

Клонируем репозиторий проекта:
```
git clone https://github.com/nikolaas/travnikov-garden.git
```
В проекте используется библиотека [modernizr](https://modernizr.com/), устанавливаем ее глобально:
```
npm install -g modernizr
```
Затем переходим в директорию проекта:
```
cd travnikov-garden
```
И устанавливаем все требуемые зависимости:
```
npm install
```

## Сборка

Для сборки проекта выполяем команду:
```
npm run build
```
В результате успешной сборки в директории проекта будет создана директория **dist** со следующей структурой

```
dist
|-----css - используемые на сайте стили
|-----fonts - используемые на сайте шрифты
|-----images - используемые на сайте изображения
|-----external-images - используемые на сайте изображения (которые должны загружаться с хостинга)
|-----js - используемые на сайте js-скрипты
|-----index.html - html-файл главной страницы
|-----... html-файлы остальных страниц
```

## Разработка

Для разработки используется [webpack-dev-server](https://webpack.github.io/docs/webpack-dev-server.html).

Чтобы его запустить необходимо выполнить команду:
```
npm run serve
```

Сервер запускатеся по адресу [http://localhost:8080/]( http://localhost:8080/)

### Добавление новых страниц

Для того, чтобы добавить новую страницу на сайт, нужно выполнить следующие щаги:

1. в файле `webpack.config.js` добавить в массив `PAGES` новый элемент, представляющий из себя имя добавляемой страницы,
например:
```javascript
const PAGES = [
    'index',
    'about',
    'my-new-page'
];
```
2. В директории **pages** создать поддиректорию для новой страницы. Cозданная поддиректория должна иметь такое же
название, как в шаге № 1, например
```
pages
|---index
|---about
|---my-new-page
```
3. В директорию новой страницы добавить следующие файлы:
    - page-name.pug - шаблон новой страницы (обязательно)
    - page-name.js - скрипты новой страницы (обязательно)
    - page-name.data.js - данные используемые в шаблоне (опционально)
    - page-name.styl - стили новой страницы (опционально)

В итоге, должна получиться примерно следующая структура:
```
pages
|---index
|---about
|---my-new-page
    |---my-new-page.pug
    |---my-new-page.js
    |---my-new-page.data.js
    |---my-new-page.styl
```

В приложении созданная страница будет доступна из других страниц по ссылке `my-new-page.html`

Чтобы проделанные изменения подхватились дев-сервером, его необходимо перезапустить.

### Ресурсы приложения

#### Шрифты

Шрифты приложения располагаются в директории `src/resources/fonts` и
подключаются в файле `src/styles/fonts.styl`.

#### Изображения

Изображения приложения располагаются в следующих директория:
1. `src/resources/images` - внутренние изображения, вставляемые в страницу через тег `img`
2. `src/resources/style-images` - внутренние изображения вставляемые в страницу, через стили
2. `src/resources/external-images` - внешние изображения, которые в итоге сайт будет получать от CMS

Разделение на внутренние и внешние изображения понадобилось, чтобы
отделить статические изображения от динамических, которые будет отдавать CMS.

Разделение внутренних изображений по директорим `image` и `style-images`
понадобилось, чтобы они корректно отображались как в режиме отладки при
помощи дев сервера, так и в готовом собранном варианте при просмотре через
файловую структуру.
